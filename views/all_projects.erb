<script>
  $(function(){
    var projectHeight = 30;
    var n_rows = Math.floor(window.innerHeight / projectHeight);
    var n_projects = $('.project').size();
    var n_cols = Math.ceil(n_projects / n_rows);
    var projectWidth = Math.floor(($('#all_projects').width()) / n_cols);

    projectWidth = projectWidth - 2;
    projectHeight = projectHeight - 2;

    $('.project').css('width',projectWidth + 'px');
    $('.project').css('height',projectHeight + 'px');
    $('.project').css('line-height',projectHeight + 'px');

    console.log("height" + window.innerHeight)
    console.log("row * cols" + (n_rows * n_cols));
    console.log("projects" + n_projects);
    console.log("rows" + n_rows);
    console.log("cols" + n_cols);
  });
</script>

<div id="all_projects">
  <% for project in @projects %>
    <div class="project <%= project.get_attribute('lastBuildStatus')%>">
      <%= project.get_attribute('name')  %>
    </div>
  <% end %>
  <div class="clear">&nbsp;</div>
</div>
